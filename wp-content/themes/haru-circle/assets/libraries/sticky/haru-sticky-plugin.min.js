!function(t){"use strict";var e={topSpacing:0,topSticky:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"haru-sticky-wrapper",center:!1,getWidthFrom:"",responsiveWidth:!1},i=t(window),s=t(document),n=[],o=i.height(),c=function(){for(var e=i.scrollTop(),c=s.height(),r=c-o,a=e>r?r-e:0,l=null,p=null,h=0;h<n.length;h++){var d=n[h];if(e<=d.stickyWrapper.offset().top-d.topSpacing-a)null!==d.currentTop&&d.stickyElement.hasClass("sticky-on")&&(d.stickyElement.removeClass("sticky-on"),d.stickyElement.removeClass("sticky-in"),d.stickyElement.addClass("sticky-out"),clearTimeout(p),p=setTimeout(function(){d.stickyElement.removeClass("sticky-out"),d.stickyElement.css("position","").css("top",""),d.stickyElement.trigger("sticky-end",[d]).parent().removeClass(d.className),d.currentTop=null,void 0!==d.change&&null!=d.change&&d.change()},300));else{var u=c-d.stickyElement.outerHeight()-d.topSpacing-d.bottomSpacing-e-a;u<0?u+=d.topSticky:u=d.topSticky,d.currentTop!=u&&(clearTimeout(l),clearTimeout(p),d.stickyElement.addClass("sticky-on"),d.stickyElement.addClass("sticky-in"),d.stickyElement.removeClass("sticky-out"),l=setTimeout(function(){d.stickyElement.removeClass("sticky-in")},500),d.stickyElement.css("position","fixed").css("top",u),void 0!==d.getWidthFrom&&d.stickyElement.css("width",t(d.getWidthFrom).width()),d.stickyElement.trigger("sticky-start",[d]).parent().addClass(d.className),d.currentTop=u,void 0!==d.change&&null!=d.change&&d.change())}}},r=function(){o=i.height();for(var e=0;e<n.length;e++){var s=n[e];void 0!==s.getWidthFrom&&!0===s.responsiveWidth&&s.stickyElement.css("width",t(s.getWidthFrom).width())}},a={init:function(i){var s=t.extend({},e,i);return this.each(function(){var e=t(this),i=e.attr("id"),o=t("<div></div>").attr("id",i+"-haru-sticky-wrapper").addClass(s.wrapperClassName);e.wrapAll(o),s.center&&e.parent().css({width:e.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"==e.css("float")&&e.css({float:"none"}).parent().css({float:"right"});var c=e.parent();e.outerHeight(!0)>0&&c.css("height",e.outerHeight(!0)),n.push({topSpacing:s.topSpacing,topSticky:s.topSticky,bottomSpacing:s.bottomSpacing,stickyElement:e,currentTop:null,stickyWrapper:c,className:s.className,getWidthFrom:s.getWidthFrom,responsiveWidth:s.responsiveWidth,change:s.change})})},update:c,unstick:function(e){return this.each(function(){for(var e=t(this),i=-1,s=0;s<n.length;s++)n[s].stickyElement.get(0)==e.get(0)&&(i=s);-1!=i&&(n.splice(i,1),e.unwrap(),e.removeAttr("style"))})}};window.addEventListener?(window.addEventListener("scroll",c,!1),window.addEventListener("resize",r,!1)):window.attachEvent&&(window.attachEvent("onscroll",c),window.attachEvent("onresize",r)),t.fn.sticky=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sticky"):a.init.apply(this,arguments)},t.fn.unstick=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sticky"):a.unstick.apply(this,arguments)},t(function(){setTimeout(c,0)})}(jQuery);